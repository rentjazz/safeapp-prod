{"ast":null,"code":"import _objectSpread from\"/data/.openclaw/workspace/safeapp-prod/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const N8N_URL=window.N8N_URL||'https://n8n.superprojetx.com';console.log('n8n URL:',N8N_URL);class ApiService{// Tasks\nstatic async getTasks(){try{const res=await fetch(\"\".concat(N8N_URL,\"/webhook/safeapp-tasks\"));console.log('Tasks response status:',res.status);if(!res.ok)throw new Error(\"HTTP \".concat(res.status));const data=await res.json();console.log('Tasks data:',data);// Ensure we return { items: [...] }\nif(data.items)return data;if(Array.isArray(data))return{items:data};return{items:[data]};}catch(err){console.error('Tasks error:',err);throw err;}}static async createTask(task){const res=await fetch(\"\".concat(N8N_URL,\"/webhook/safeapp-task-create\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(task)});if(!res.ok)throw new Error('Erreur création');return res.json();}static async updateTask(listId,taskId,task){const res=await fetch(\"\".concat(N8N_URL,\"/webhook/safeapp-task-update\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread({listId,taskId},task))});if(!res.ok)throw new Error('Erreur mise à jour');return res.json();}static async deleteTask(listId,taskId){const res=await fetch(\"\".concat(N8N_URL,\"/webhook/safeapp-task-delete\"),{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({listId,taskId})});if(!res.ok)throw new Error('Erreur suppression');return res.json();}// Calendar\nstatic async getCalendarEvents(){try{const res=await fetch(\"\".concat(N8N_URL,\"/webhook/safeapp-calendar\"));console.log('Calendar response status:',res.status);if(!res.ok)throw new Error(\"HTTP \".concat(res.status));const data=await res.json();console.log('Calendar data:',data);if(data.items)return data;if(Array.isArray(data))return{items:data};return{items:[data]};}catch(err){console.error('Calendar error:',err);throw err;}}// Stock\nstatic async getStock(){try{const res=await fetch(\"\".concat(N8N_URL,\"/webhook/safeapp-stock\"));console.log('Stock response status:',res.status);if(!res.ok)throw new Error(\"HTTP \".concat(res.status));const data=await res.json();console.log('Stock data:',data);return data;}catch(err){console.error('Stock error:',err);throw err;}}}export default ApiService;","map":{"version":3,"names":["N8N_URL","window","console","log","ApiService","getTasks","res","fetch","concat","status","ok","Error","data","json","items","Array","isArray","err","error","createTask","task","method","headers","body","JSON","stringify","updateTask","listId","taskId","_objectSpread","deleteTask","getCalendarEvents","getStock"],"sources":["/data/.openclaw/workspace/safeapp-prod/src/services/api.js"],"sourcesContent":["const N8N_URL = window.N8N_URL || 'https://n8n.superprojetx.com';\n\nconsole.log('n8n URL:', N8N_URL);\n\nclass ApiService {\n  // Tasks\n  static async getTasks() {\n    try {\n      const res = await fetch(`${N8N_URL}/webhook/safeapp-tasks`);\n      console.log('Tasks response status:', res.status);\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      console.log('Tasks data:', data);\n      // Ensure we return { items: [...] }\n      if (data.items) return data;\n      if (Array.isArray(data)) return { items: data };\n      return { items: [data] };\n    } catch (err) {\n      console.error('Tasks error:', err);\n      throw err;\n    }\n  }\n\n  static async createTask(task) {\n    const res = await fetch(`${N8N_URL}/webhook/safeapp-task-create`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(task)\n    });\n    if (!res.ok) throw new Error('Erreur création');\n    return res.json();\n  }\n\n  static async updateTask(listId, taskId, task) {\n    const res = await fetch(`${N8N_URL}/webhook/safeapp-task-update`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ listId, taskId, ...task })\n    });\n    if (!res.ok) throw new Error('Erreur mise à jour');\n    return res.json();\n  }\n\n  static async deleteTask(listId, taskId) {\n    const res = await fetch(`${N8N_URL}/webhook/safeapp-task-delete`, {\n      method: 'DELETE',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ listId, taskId })\n    });\n    if (!res.ok) throw new Error('Erreur suppression');\n    return res.json();\n  }\n\n  // Calendar\n  static async getCalendarEvents() {\n    try {\n      const res = await fetch(`${N8N_URL}/webhook/safeapp-calendar`);\n      console.log('Calendar response status:', res.status);\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      console.log('Calendar data:', data);\n      if (data.items) return data;\n      if (Array.isArray(data)) return { items: data };\n      return { items: [data] };\n    } catch (err) {\n      console.error('Calendar error:', err);\n      throw err;\n    }\n  }\n\n  // Stock\n  static async getStock() {\n    try {\n      const res = await fetch(`${N8N_URL}/webhook/safeapp-stock`);\n      console.log('Stock response status:', res.status);\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      console.log('Stock data:', data);\n      return data;\n    } catch (err) {\n      console.error('Stock error:', err);\n      throw err;\n    }\n  }\n}\n\nexport default ApiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}